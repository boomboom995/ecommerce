<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.customer.ecommerce.dao.OrderMapper">
    <insert id="insertOrder" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO orders (customer_id, original_amount, discount_amount, total_amount, coupon_code, status, order_date)
        VALUES (#{customerId}, #{originalAmount}, #{discountAmount}, #{totalAmount}, #{couponCode}, #{status}, #{orderDate})
    </insert>
    <insert id="insertOrderItems">
        INSERT INTO order_items (order_id, variant_id, quantity, price, is_returned)
        VALUES
        <foreach collection="items" item="item" separator=",">
            (#{item.orderId}, #{item.variantId}, #{item.quantity}, #{item.price}, false)
        </foreach>
    </insert>
</mapper>